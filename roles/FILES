- name: Roundcube configuration for Apache2
  copy: src=roundcube-apache.conf dest=/etc/apache2/conf.d/roundcube.conf owner=root group=root mode=0644
  when: roundcube_status.stat.isfile is not defined


- name: Reconfigure Pure-FTPd to be STANDALONE and CHROOTed
  replace: dest=/etc/default/pure-ftpd-common regexp='STANDALONE_OR_INETD=' replace='STANDALONE_OR_INETD=standalone' 
  replace: dest=/etc/default/pure-ftpd-common regexp='VIRTUALCHROOT=.*' replace='VIRTUALCHROOT=true' 

- name: Config pureFTPd's TLS
  command: echo 1 > /etc/pure-ftpd/conf/TLS

- name: Fix file
  file: state=directory path=/etc/ssl/private mode=0710 owner=root group=ssl-cert

- name: copy my.cnf file with root password credentials to /root/.my.cnf
  template: src=my.cnf dest=/root/.my.cnf owner=root mode=0600

- name: Configure MySQL to listen on *:3306
  replace: dest=/etc/mysql/my.cnf regexp='bind-address' replace='#bind-address'


